<?xml version="1.0" encoding="UTF-8"?>

<mule xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:munit="http://www.mulesoft.org/schema/mule/munit" xmlns:munit-tools="http://www.mulesoft.org/schema/mule/munit-tools"
	xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xsi:schemaLocation="
		http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
		http://www.mulesoft.org/schema/mule/munit http://www.mulesoft.org/schema/mule/munit/current/mule-munit.xsd
		http://www.mulesoft.org/schema/mule/munit-tools  http://www.mulesoft.org/schema/mule/munit-tools/current/mule-munit-tools.xsd">
	<munit:config name="sfdc-sapi-education-test-suite.xml" />
	<munit:test name="sfdc-sapi-education-test-suite-sfdc-sapi-education-flowUpdateTest" doc:id="c940c808-6c93-4a58-b298-00a6fe80b807" description="Test">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when sf query for records" doc:id="cb7b9256-7919-486e-89d9-57696cee6f7d" processor="salesforce:query">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Query Salesforce to check records" attributeName="doc:name" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:variables >
						<munit-tools:variable key="data" value='#[[{Id:"a0Z7A000009P1SIUA0",AQB__Contact__c:"0037A00000VSOxlQAH",AQB__Institution__c:"",AQB__Campus__c:"",AQB__IsPrimaryDegree__c:"NO",AQB__HonoraryDegree__c:"false",RecordTypeId:"0122E000000h0RrQAI",AQB__DegreeLevel__c:"Graduate",AQB__Graduation_Month__c:"",AQB__GraduationYear__c:"1998",AQB__DegreeDiploma__c:"Master of Business Administration",AQB__PreferredYear__c:"1998",AQB__FirstYearofAttendance__c:"1996",AQB__LastYearofAttendance__c:"1998",AQB__School__c:"",AQB__Department__c:"Business and Economics",CreatedById:"0052E00000LEzCHQA1",CreatedDate:"2020-07-21T12:10:46.000Z",LastModifiedById:"0052E00000LEzCHQA1",LastModifiedDate:"2020-07-21T12:10:46.000Z"}]]' mediaType="application/java" />
					</munit-tools:variables>
				</munit-tools:then-return>
			</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock when update salesforce" doc:id="f3dde1c7-568c-489b-a1e8-d70f4f98d969" processor="salesforce:update-single">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Update single Education in Salesforce" attributeName="doc:name" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[{status:"success"}]' mediaType="application/java" />
				</munit-tools:then-return>
			</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="8f80d081-4388-485e-8047-761c5cd8a55c" >
				<munit:payload value='#[
[{
	AQB__DegreeLevel__c:"graduate",
	AQB__Contact__c:"23432432"
}]]' mediaType="application/java" />
			</munit:set-event>
			<flow-ref doc:name="Flow-ref to post:\sfdc\education:application\json:sfdc-api-config" doc:id="eadd3204-e63f-4504-b7af-2677aa1ff865" name="post:\sfdc\education:application\json:sfdc-api-config"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="b058e60a-dda3-447e-a21e-d0ca721d2981" expression="#[payload]" is="#[MunitTools::notNullValue()]"/>
		</munit:validation>
	</munit:test>

<munit:test name="sfdc-sapi-education-test-suite-sfdc-sapi-education-flowCreateTest" doc:id="94173905-217d-4ef2-bf92-e84f80d439b4" description="Test">
		<munit:behavior >
			<munit-tools:mock-when doc:name="Mock when sf query for records" doc:id="46ea6b63-ea24-4fd6-8749-b42b92f9540e" processor="salesforce:query">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Query Salesforce to check records" attributeName="doc:name" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:variables >
						<munit-tools:variable key="data" value="#[[]]" mediaType="application/java" />
					</munit-tools:variables>
				</munit-tools:then-return>
			
</munit-tools:mock-when>
			<munit-tools:mock-when doc:name="Mock when create salesforce" doc:id="9888d51e-1edd-4f4e-bb7c-7a4f30742c75" processor="salesforce:create-single">
				<munit-tools:with-attributes >
					<munit-tools:with-attribute whereValue="Create single Education into Salesforce" attributeName="doc:name" />
				</munit-tools:with-attributes>
				<munit-tools:then-return >
					<munit-tools:payload value='#[{status:"success"}]' mediaType="application/java" />
				</munit-tools:then-return>
			
</munit-tools:mock-when>
		</munit:behavior>
		<munit:execution >
			<munit:set-event doc:name="Set Event" doc:id="42c078f1-4c91-4546-b122-85570a0638eb" >
				<munit:payload value='#[
[{
	AQB__DegreeLevel__c:"graduate",
	AQB__Contact__c:"23432432"
}]]' mediaType="application/java" />
			</munit:set-event>
			<flow-ref doc:name="Flow-ref to post:\sfdc\education:application\json:sfdc-api-config" doc:id="a101da27-f54d-455f-90cf-c79c429b57df" name="post:\sfdc\education:application\json:sfdc-api-config"/>
		</munit:execution>
		<munit:validation >
			<munit-tools:assert-that doc:name="Assert that" doc:id="4f914bcd-0834-4b3d-b0b2-2d3b4ca3fec8" expression="#[payload]" is="#[MunitTools::notNullValue()]"/>
		</munit:validation>
	</munit:test>

</mule>
